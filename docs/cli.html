
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Using the CLI &#8212; pyrefinebio 0.1.0 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Classes" href="classes.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="using-the-cli">
<span id="id1"></span><h1>Using the CLI<a class="headerlink" href="#using-the-cli" title="Permalink to this headline">¶</a></h1>
<p>Before you can use the CLI to download Datasets and Compendia, you need to create and activate a Token.</p>
<p>See <a class="reference internal" href="#using-the-cli-setting-up-tokens"><span class="std std-ref">Setting up Tokens</span></a> for information on setting up Tokens using the CLI.</p>
<p>Or you can go to <a class="reference internal" href="quickstart.html#quickstart-setting-up-tokens"><span class="std std-ref">Setting up Tokens</span></a> for a tutorial on setting up a Token using python.</p>
<div class="section" id="setting-up-tokens">
<span id="using-the-cli-setting-up-tokens"></span><h2>Setting up Tokens<a class="headerlink" href="#setting-up-tokens" title="Permalink to this headline">¶</a></h2>
<p>pyrefinebio provides the CLI command <cite>create-token</cite> which can automatically create, activate, and save a Token for you.</p>
<p>By default, <cite>create-token</cite> will prompt you before activating and saving the Token it creates.</p>
<p>Alternatively, it has the flag <cite>–silent</cite> or <cite>-s</cite> which you can use to bypass the prompts.</p>
<p>If you use the silent flag, the created Token will be automatically activated and saved to the config file located by default at <cite>~/.refinebio.yaml</cite>.
You must save the Token in order for it to be used in future CLI commands.</p>
<p>For more information about pyrefinebio’s Config see <a class="reference internal" href="config.html#config"><span class="std std-ref">Config</span></a>.</p>
<p>Here’s an example of creating, activating, and saving a Token with prompts:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ refinebio create-token
Please review the refine.bio Terms of Use: https://www.refine.bio/terms and Privacy Policy: https://www.refine.bio/privacy
Do you understand and accept both documents? <span class="o">(</span>y/N<span class="o">)</span>y
Would you like to save your Token to the Config file <span class="k">for</span> future use? <span class="o">(</span>y/N<span class="o">)</span>y
</pre></div>
</div>
<p>Here’s an example of creating, activating, and saving a Token without prompts:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ refinebio create-token -s
</pre></div>
</div>
</div>
<div class="section" id="downloading-datasets">
<h2>Downloading Datasets<a class="headerlink" href="#downloading-datasets" title="Permalink to this headline">¶</a></h2>
<p>After you set up and activate a Token you can use the CLI to start creating and downloading Datasets.</p>
<p>See <a class="reference internal" href="#using-the-cli-setting-up-tokens"><span class="std std-ref">Setting up Tokens</span></a> for information on setting up Tokens using the CLI.</p>
<p>Or you can go to <a class="reference internal" href="quickstart.html#quickstart-setting-up-tokens"><span class="std std-ref">Setting up Tokens</span></a> for a tutorial on setting up a Token using python.</p>
<p>pyrefinebio provides the CLI command <cite>download-dataset</cite> for creating and downloading Datasets.
It will automatically handle every part of the creation and download process for you.
You will receive the Dataset as a zip file.</p>
<p><cite>download-dataset</cite> requires that you pass in the options <cite>email-address</cite>, and either <cite>experiments</cite> or <cite>dataset-dict</cite>.</p>
<ul class="simple">
<li><p><cite>email_address</cite> is the email address that will be notified when the Dataset is finished processing.</p></li>
</ul>
<p>The options <cite>experiments</cite> and <cite>dataset-dict</cite> both control which Experiments and Samples will be a part of the Dataset.</p>
<ul class="simple">
<li><p><cite>experiments</cite> can be used when you want to add specific Experiments to your Dataset. All the downloadable samples associated with the Experiments that you pass in will be added to the Dataset.</p></li>
</ul>
<p>The <cite>experiments</cite> option is just a space separated list of Experiment accession codes. Here’s an example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ refinebio download-datset --experiments <span class="s2">&quot;&lt;Experiment 1 Accession Code&gt; &lt;Experiment 2 Accession Code&gt;&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><cite>dataset-dict</cite> should be used when you want to specify specific Samples to be included in the Dataset. However, you can pass in “ALL” instead of specific Sample accession codes to add all downloadable Samples associated with that Experiment to the Dataset.</p></li>
</ul>
<p>The <cite>dataset-dict</cite> option is a JSON object in the following format:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ dataset-json<span class="o">=</span><span class="s1">&#39;{&quot;&lt;Experiment 1 Accession Code&gt;&quot;: [&quot;&lt;Sample 1 Accession Code&gt;&quot;, &quot;&lt;Sample 2 Accession Code&gt;&quot;], &quot;&lt;Experiment 2 Accession Code&gt;&quot;: [&quot;ALL&quot;]}&#39;</span>
$ refinebio download-dataset --dataset-dict
</pre></div>
</div>
<p>You can also pass in other optional command options to alter the Dataset itself and to alter how the download process works.</p>
<ul class="simple">
<li><p><cite>path</cite> is the path that the Dataset will be downloaded to. You specify a path to a zip file or a directory. If you pass in a path to a directory, the name of the zip file will be automatically generated in the format <cite>dataset-&lt;dataset_id&gt;.zip</cite>. By default, <cite>path</cite> will be set to the current directory.</p></li>
<li><p><cite>aggregation</cite> can be used to change how the Dataset is aggregated. The default is “EXPERIMENT”, and the other available choices are “SPECIES” and “ALL”. For more information about Dataset aggregation check out <a class="reference external" href="https://refinebio-docs.readthedocs.io/en/latest/main_text.html?highlight=aggregation#aggregations">Aggregations</a>.</p></li>
<li><p><cite>transformation</cite> can be used to change the transformation of the Dataset. The default is “NONE”, and the other available choices are “MINMAX” and “STANDARD”. For more information on Dataset transformation check out <a class="reference external" href="https://refinebio-docs.readthedocs.io/en/latest/main_text.html?highlight=quantile#gene-transformations">Gene transformations</a>.</p></li>
<li><p><cite>skip-quantile-normalization</cite> can be used to choose whether or not quantile normalization is skipped for RNA-seq Samples. For more information check out <a class="reference external" href="https://refinebio-docs.readthedocs.io/en/latest/main_text.html?highlight=quantile%20normalization#quantile-normalization">Quantile normalization</a>.</p></li>
<li><p><cite>extract</cite> can be used to choose whether the downloaded zip file should be automatically extracted. It will automatically extract to the same location that you passed in as <cite>path</cite>. So if <cite>path</cite> is a zip file: <cite>./path/to/dataset.zip</cite> it will be extracted to the dir <cite>./path/to/dataset/</cite>, if <cite>path</cite> is a dir: <cite>./path/to/dir/</cite> it will be extracted to <cite>./path/to/dir/[generated-file-name]/</cite>. By default, <cite>extract</cite> is False.</p></li>
<li><p><cite>prompt</cite> can be used to choose whether or not you should be prompted before downloading if the Dataset zip file is larger than 1 gigabyte. By default, <cite>prompt</cite> is True.</p></li>
</ul>
<p>Below is a simple example of downloading a Dataset using <cite>experiments</cite>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ refinebio download-dataset --path <span class="s2">&quot;~/path/to/dataset/dir/&quot;</span> --email-address <span class="s2">&quot;foo@bar.com&quot;</span> --experiments <span class="s2">&quot;GSE74410 GSM604796 GSM604797&quot;</span>
</pre></div>
</div>
<p>Below is a simple example of downloading a Dataset using <cite>dataset_dict</cite>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ dataset-json<span class="o">=</span><span class="s1">&#39;{&quot;GSE74410&quot;: [&quot;ALL&quot;], &quot;GSE24528&quot;: [&quot;GSM604796&quot;, &quot;GSM604797&quot;]}&#39;</span>
$ refinebio download-dataset --path <span class="s2">&quot;./path/to/dataset.zip&quot;</span> --email-address <span class="s2">&quot;foo@bar.com&quot;</span> --dataset-dict <span class="nv">$dataset</span>-json
</pre></div>
</div>
</div>
<div class="section" id="downloading-compendia">
<h2>Downloading Compendia<a class="headerlink" href="#downloading-compendia" title="Permalink to this headline">¶</a></h2>
<p>You can start using the CLI to download Compendia after you set up and activate a Token.</p>
<p>See <a class="reference internal" href="#using-the-cli-setting-up-tokens"><span class="std std-ref">Setting up Tokens</span></a> for information on setting up Tokens using the CLI.</p>
<p>Or you can go to <a class="reference internal" href="quickstart.html#quickstart-setting-up-tokens"><span class="std std-ref">Setting up Tokens</span></a> for a tutorial on setting up a Token using python.</p>
<p>pyrefinebio provides the CLI command <cite>download-compendium</cite> for downloading Compendium results.
It will automatically search for Compendia based on organisms and download the results.
You will receive the Compendium as a zip file.</p>
<p><cite>download-compendium</cite> requires that you pass in the parameter <cite>organism</cite>.</p>
<ul class="simple">
<li><p><cite>organism</cite> is the scientific name of the Organism for the Compendium that you want to download.</p></li>
</ul>
<p>You can also pass in other optional parameters to alter the type of Compendium you download.</p>
<ul class="simple">
<li><p><cite>path</cite> is the path that the Dataset will be downloaded to. You specify a path to a zip file or a directory. If you pass in a path to a directory, the name of the zip file will be automatically generated in the format <cite>compendium-&lt;compendium_id&gt;.zip</cite>. By default, <cite>path</cite> will be set to the current directory.</p></li>
<li><p><cite>version</cite> is the Compendium version. The default is <cite>None</cite> which will get the latest version.</p></li>
<li><p><cite>quant-sf-only</cite> can be used to choose if the Compendium is quantile normalized. Pass in True for RNA-seq Sample Compendium results or False for quantile normalized. By default, <cite>quant_sf_only</cite> is False. For more information on normalized vs RNA-seq compendia check out <a class="reference external" href="http://docs.refine.bio/en/latest/main_text.html#refine-bio-compendia">refine.bio Compendia</a>.</p></li>
<li><p><cite>extract</cite> can be used to choose whether the downloaded zip file should be automatically extracted. It will automatically extract to the same location that you passed in as <cite>path</cite>. So if <cite>path</cite> is a zip file: <cite>./path/to/dataset.zip</cite> it will be extracted to the dir <cite>./path/to/dataset/</cite>, if <cite>path</cite> is a dir: <cite>./path/to/dir/</cite> it will be extracted to <cite>./path/to/dir/[generated-file-name]/</cite>. By default, <cite>extract</cite> is False.</p></li>
<li><p><cite>prompt</cite> can be used to choose whether or not you should be prompted before downloading if the Dataset zip file is larger than 1 gigabyte. By default, <cite>prompt</cite> is True.</p></li>
</ul>
<p>Below is a simple example of Downloading a Compendium result:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ refinebio download--compendium --path <span class="s2">&quot;~/path/to/dir/for/compendium/&quot;</span> --organism <span class="s2">&quot;HOMO_SAPIENS&quot;</span>
</pre></div>
</div>
<p>pyrefinebio also provides the CLI command <cite>download-quantfile-compendium</cite> which is equivalent to using
the command <cite>download-compendium</cite> with the option <cite>quant-sf-only</cite> set to True.</p>
<p>You can use this function when you want to be explicit to future users of your script that you are downloading quantfile Compendium results.</p>
<p>Below is a simple example of Downloading a Compendium result using <cite>download-quantfile-compendium</cite>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ refinebio download-quantfile-compendium --path <span class="s2">&quot;~/path/to/dir/for/compendium/&quot;</span> --organism <span class="s2">&quot;HOMO_SAPIENS&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-information-about-pyrefinebio-classes-and-functions">
<h2>Getting Information About pyrefinebio Classes and Functions<a class="headerlink" href="#getting-information-about-pyrefinebio-classes-and-functions" title="Permalink to this headline">¶</a></h2>
<p>If you are re-reading a script that you wrote and forget what a pyrefinebio function or class does -
or if you just want more information about a pyrefinebio class or function, pyrefinebio exposes its <cite>help()</cite> function
as the command <cite>describe</cite> which can print out information about all pyrefinebio classes/functions.</p>
<p>To get information about a function or class, just pass its name as the first argument to the command.</p>
<p>Here’s an example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ refinebio describe download_dataset
</pre></div>
</div>
<p>This will print out information about the pyrefinebio <cite>download_dataset()</cite> function.</p>
<p>To get information about a class method, just pass in <cite>&lt;Class&gt;.&lt;method&gt;</cite> as the first argument to the command.</p>
<p>Here’s an example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ refinebio describe Sample.search
</pre></div>
</div>
<p>This will print out information about the pyrefinebio class <cite>Sample</cite>’s search method.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pyrefinebio</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using the CLI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-tokens">Setting up Tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="#downloading-datasets">Downloading Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#downloading-compendia">Downloading Compendia</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-information-about-pyrefinebio-classes-and-functions">Getting Information About pyrefinebio Classes and Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="more_stuff.html">More Stuff</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="quickstart.html" title="previous chapter">Quickstart</a></li>
      <li>Next: <a href="classes.html" title="next chapter">Classes</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, CCDL.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/cli.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>